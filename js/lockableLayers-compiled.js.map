{"version":3,"sources":["lockableLayers.js"],"names":[],"mappings":";;;;;AAGA,CAAC,YAAU;AACT,MAAI,SAAS,SAAS,cAAT,CAAwB,QAAxB,CAAb;AACA,MAAI,MAAM,OAAO,UAAP,CAAkB,IAAlB,CAAV;;;;;AAKA,MAAI,SAAS,SAAT,MAAS,CAAS,CAAT,EAAY,CAAZ,EAAe,CAAf,EAAkB,SAAlB,EAA6B;AACxC,SAAK,CAAL,GAAS,KAAK,CAAd,C;AACA,SAAK,CAAL,GAAS,KAAK,CAAd;AACA,SAAK,KAAL,GAAa,KAAK,CAAlB;AACA,SAAK,MAAL,GAAc,KAAK,CAAnB;AACA,SAAK,SAAL,GAAiB,aAAa,SAA9B;AACD,GAND;;AAQA,SAAO,SAAP,CAAiB,IAAjB,GAAwB,UAAS,GAAT,EAAc;AACpC,QAAI,SAAJ,GAAgB,KAAK,SAArB;AACA,QAAI,QAAJ,CAAa,KAAK,CAAlB,EAAqB,KAAK,CAA1B,EAA6B,KAAK,KAAlC,EAAyC,KAAK,MAA9C;AACD,GAHD;;AAMA,MAAI,QAAQ,SAAR,KAAQ,GAAW;AACrB,SAAK,MAAL,GAAc,EAAd;AACA,SAAK,MAAL,GAAc,EAAd;AACA,SAAK,SAAL,GAAiB,EAAjB;AACA,SAAK,UAAL,GAAkB,EAAlB;AACA,SAAK,SAAL,GAAiB,EAAjB;AACA,SAAK,YAAL,GAAoB,IAApB;AACD,GAPD;;;;;AAaA,MAAI,cAAc,SAAd,WAAc,CAAS,MAAT,EAAiB;AACjC,SAAK,MAAL,GAAc,MAAd,C;AACA,SAAK,GAAL,GAAW,OAAO,UAAP,CAAkB,IAAlB,CAAX,C;AACA,SAAK,KAAL,GAAa,KAAb,C;AACA,SAAK,eAAL;AACA,SAAK,eAAL;AACA,SAAK,aAAL;;AAEA,SAAK,MAAL,GAAc,CAAC,EAAC,MAAM,OAAP,EAAgB,KAAK,SAArB,EAAD,EAAkC,EAAC,MAAM,KAAP,EAAc,KAAK,SAAnB,EAAlC,EACZ,EAAC,MAAM,OAAP,EAAgB,KAAK,SAArB,EADY,EACqB,EAAC,MAAM,MAAP,EAAe,KAAK,SAApB,EADrB,CAAd;AAEA,SAAK,aAAL,GAAqB,CAArB;AACA,SAAK,YAAL,GAAoB,KAAK,MAAL,CAAY,KAAK,aAAjB,EAAgC,IAApD;;AAEA,SAAK,KAAL,GAAa,CAAC,EAAC,MAAM,MAAP,EAAe,QAAQ,CAAvB,EAAD,EAA4B,EAAC,MAAM,OAAP,EAAgB,QAAQ,CAAxB,EAA5B,EACX,EAAC,MAAM,QAAP,EAAiB,QAAQ,EAAzB,EADW,EACmB,EAAC,MAAM,OAAP,EAAgB,QAAQ,EAAxB,EADnB,CAAb;AAEA,SAAK,YAAL,GAAoB,CAApB;AACA,SAAK,WAAL,GAAmB,KAAK,KAAL,CAAW,KAAK,YAAhB,EAA8B,IAAjD;;AAEA,SAAK,MAAL,GAAc,EAAd,C;AACA,SAAK,MAAL,CAAY,IAAZ,CAAiB,IAAI,KAAJ,EAAjB;AACA,SAAK,aAAL,GAAqB,CAArB;AACD,GArBD;;AAuBA,cAAY,SAAZ,CAAsB,QAAtB,GAAiC,UAAS,CAAT,EAAY,CAAZ,EAAe,QAAf,EAAyB;AACxD,SAAK,MAAL,CAAY,KAAK,aAAjB,EAAgC,MAAhC,CAAuC,IAAvC,CAA4C,CAA5C;AACA,SAAK,MAAL,CAAY,KAAK,aAAjB,EAAgC,MAAhC,CAAuC,IAAvC,CAA4C,CAA5C;AACA,SAAK,MAAL,CAAY,KAAK,aAAjB,EAAgC,SAAhC,CAA0C,IAA1C,CAA+C,QAA/C;AACA,SAAK,MAAL,CAAY,KAAK,aAAjB,EAAgC,UAAhC,CAA2C,IAA3C,CAAgD,KAAK,MAAL,CAAY,KAAK,aAAjB,EAAgC,GAAhF;AACA,SAAK,MAAL,CAAY,KAAK,aAAjB,EAAgC,SAAhC,CAA0C,IAA1C,CAA+C,KAAK,KAAL,CAAW,KAAK,YAAhB,EAA8B,MAA7E;AACD,GAND;;AAQA,cAAY,SAAZ,CAAsB,MAAtB,GAA+B,YAAW;AACxC,SAAK,GAAL,CAAS,SAAT,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,KAAK,MAAL,CAAY,KAArC,EAA4C,KAAK,MAAL,CAAY,MAAxD,E;AACA,SAAK,GAAL,CAAS,QAAT,GAAoB,OAApB;;AAEA,SAAI,IAAI,IAAE,CAAV,EAAa,IAAI,KAAK,MAAL,CAAY,KAAK,aAAjB,EAAgC,MAAhC,CAAuC,MAAxD,EAAgE,GAAhE,EAAqE;AACnE,WAAK,GAAL,CAAS,SAAT;AACA,UAAG,KAAK,MAAL,CAAY,KAAK,aAAjB,EAAgC,SAAhC,CAA0C,CAA1C,KAAgD,CAAnD,EAAqD;AACnD,aAAK,GAAL,CAAS,MAAT,CAAgB,KAAK,MAAL,CAAY,KAAK,aAAjB,EAAgC,MAAhC,CAAuC,IAAE,CAAzC,CAAhB,EAA6D,KAAK,MAAL,CAAY,KAAK,aAAjB,EAAgC,MAAhC,CAAuC,IAAE,CAAzC,CAA7D;AACD,OAFD,MAEK;AACH,aAAK,GAAL,CAAS,MAAT,CAAgB,KAAK,MAAL,CAAY,KAAK,aAAjB,EAAgC,MAAhC,CAAuC,CAAvC,IAA0C,CAA1D,EAA6D,KAAK,MAAL,CAAY,KAAK,aAAjB,EAAgC,MAAhC,CAAuC,CAAvC,CAA7D;AACD;AACD,WAAK,GAAL,CAAS,MAAT,CAAgB,KAAK,MAAL,CAAY,KAAK,aAAjB,EAAgC,MAAhC,CAAuC,CAAvC,CAAhB,EAA2D,KAAK,MAAL,CAAY,KAAK,aAAjB,EAAgC,MAAhC,CAAuC,CAAvC,CAA3D;AACA,WAAK,GAAL,CAAS,SAAT;AACA,WAAK,GAAL,CAAS,WAAT,GAAuB,KAAK,MAAL,CAAY,KAAK,aAAjB,EAAgC,UAAhC,CAA2C,CAA3C,CAAvB;AACA,WAAK,GAAL,CAAS,SAAT,GAAqB,KAAK,MAAL,CAAY,KAAK,aAAjB,EAAgC,SAAhC,CAA0C,CAA1C,CAArB;AACA,WAAK,GAAL,CAAS,MAAT;AACD;AACF,GAjBD;;AAmBA,cAAY,SAAZ,CAAsB,aAAtB,GAAsC,YAAW;AAC/C,QAAI,MAAM,KAAK,GAAf;;AAEA,SAAK,IAAI,WAAW,CAApB,EAAuB,WAAW,KAAK,MAAL,CAAY,MAA9C,EAAsD,UAAtD,EAAkE;AAChE,UAAI,KAAK,MAAL,CAAY,QAAZ,EAAsB,YAA1B,EAAwC;AACtC,aAAI,IAAI,IAAE,CAAV,EAAa,IAAI,KAAK,MAAL,CAAY,QAAZ,EAAsB,MAAtB,CAA6B,MAA9C,EAAsD,GAAtD,EAA2D;AACzD,cAAI,SAAJ;AACA,cAAG,KAAK,MAAL,CAAY,QAAZ,EAAsB,SAAtB,CAAgC,CAAhC,KAAsC,CAAzC,EAA2C;AACzC,gBAAI,MAAJ,CAAW,KAAK,MAAL,CAAY,QAAZ,EAAsB,MAAtB,CAA6B,IAAE,CAA/B,CAAX,EAA8C,KAAK,MAAL,CAAY,QAAZ,EAAsB,MAAtB,CAA6B,IAAE,CAA/B,CAA9C;AACD,WAFD,MAEK;AACH,gBAAI,MAAJ,CAAW,KAAK,MAAL,CAAY,QAAZ,EAAsB,MAAtB,CAA6B,CAA7B,IAAgC,CAA3C,EAA8C,KAAK,MAAL,CAAY,QAAZ,EAAsB,MAAtB,CAA6B,CAA7B,CAA9C;AACD;AACD,cAAI,MAAJ,CAAW,KAAK,MAAL,CAAY,QAAZ,EAAsB,MAAtB,CAA6B,CAA7B,CAAX,EAA4C,KAAK,MAAL,CAAY,QAAZ,EAAsB,MAAtB,CAA6B,CAA7B,CAA5C;AACA,cAAI,SAAJ;AACA,cAAI,WAAJ,GAAkB,KAAK,MAAL,CAAY,QAAZ,EAAsB,UAAtB,CAAiC,CAAjC,CAAlB;AACA,cAAI,SAAJ,GAAgB,KAAK,MAAL,CAAY,QAAZ,EAAsB,SAAtB,CAAgC,CAAhC,CAAhB;AACA,cAAI,MAAJ;AACD;AACF;AACF;AACF,GApBD;;AAsBA,cAAY,SAAZ,CAAsB,eAAtB,GAAwC,YAAW;AACjD,SAAK,YAAL,GAAoB,CAAC,KAAK,YAAL,GAAoB,CAArB,IAA0B,KAAK,KAAL,CAAW,MAAzD;AACA,SAAK,WAAL,GAAmB,KAAK,KAAL,CAAW,KAAK,YAAhB,EAA8B,IAAjD;AACD,GAHD;;AAKA,cAAY,SAAZ,CAAsB,WAAtB,GAAoC,YAAW;AAC7C,SAAK,aAAL,GAAqB,CAAC,KAAK,aAAL,GAAqB,CAAtB,IAA2B,KAAK,MAAL,CAAY,MAA5D;AACA,SAAK,YAAL,GAAoB,KAAK,MAAL,CAAY,KAAK,aAAjB,EAAgC,IAApD;AACD,GAHD;;AAKA,cAAY,SAAZ,CAAsB,eAAtB,GAAwC,YAAW;AAAA;;AACjD,SAAK,MAAL,CAAY,gBAAZ,CAA6B,WAA7B,EAA0C,UAAC,CAAD,EAAO;AAC/C,UAAI,MAAK,KAAT,EAAgB;AACd,cAAK,QAAL,CAAc,EAAE,OAAhB,EAAyB,EAAE,OAA3B,EAAoC,IAApC,E;AACA,cAAK,MAAL;AACA,cAAK,aAAL;AACD;AACF,KAND;AAOD,GARD;;AAUA,cAAY,SAAZ,CAAsB,aAAtB,GAAsC,YAAW;AAAA;;AAC/C,SAAK,MAAL,CAAY,gBAAZ,CAA6B,SAA7B,EAAwC,UAAC,CAAD,EAAO;AAC7C,aAAK,KAAL,GAAa,KAAb;AACA,aAAK,aAAL;AACD,KAHD;AAID,GALD;;AAOA,cAAY,SAAZ,CAAsB,eAAtB,GAAwC,YAAW;AAAA;;AACjD,SAAK,MAAL,CAAY,gBAAZ,CAA6B,WAA7B,EAA0C,UAAC,CAAD,EAAO;AAC/C,aAAK,KAAL,GAAa,IAAb;AACA,aAAK,QAAL,CAAc,EAAE,OAAhB,EAAyB,EAAE,OAA3B,EAAoC,KAApC,E;;;AAGA,aAAK,MAAL;AACA,aAAK,aAAL;AACD,KAPD;AAQD,GATD;;AAWA,cAAY,SAAZ,CAAsB,cAAtB,GAAuC,YAAW;AAChD,SAAK,MAAL,CAAY,IAAZ,CAAiB,IAAI,KAAJ,EAAjB;AACA,SAAK,aAAL;AACD,GAHD;;AAMA,MAAI,IAAI,IAAI,WAAJ,CAAgB,MAAhB,CAAR;;AAEA,MAAI,UAAU,SAAS,cAAT,CAAwB,MAAxB,CAAd;AACA,UAAQ,SAAR,GAAoB,WAAW,EAAE,WAAjC;AACA,UAAQ,OAAR,GAAkB,YAAW;AAC3B,MAAE,eAAF;AACA,YAAQ,SAAR,GAAoB,WAAW,EAAE,WAAjC;AACD,GAHD;;AAKA,MAAI,WAAW,SAAS,cAAT,CAAwB,OAAxB,CAAf;AACA,WAAS,SAAT,GAAqB,YAAY,EAAE,YAAnC;AACA,WAAS,OAAT,GAAmB,YAAW;AAC5B,MAAE,WAAF;AACA,aAAS,SAAT,GAAqB,YAAY,EAAE,YAAnC;AACD,GAHD;;AAKA,MAAI,cAAc,SAAS,cAAT,CAAwB,WAAxB,CAAlB;AACA,cAAY,SAAZ,GAAwB,YAAY,EAAE,aAAtC;AACA,MAAI,SAAS,SAAS,cAAT,CAAwB,QAAxB,CAAb;AACA,MAAI,SAAS,SAAS,aAAT,CAAuB,KAAvB,CAAb;AACA,SAAO,KAAP,GAAe,EAAE,aAAjB;AACA,SAAO,OAAP,GAAiB,YAAW;AAC1B,MAAE,MAAF,CAAS,KAAK,KAAd,EAAqB,YAArB,GAAqC,EAAE,MAAF,CAAS,KAAK,KAAd,EAAqB,YAAtB,GAAsC,KAAtC,GAA8C,IAAlF;AACD,GAFD;AAGA,MAAI,aAAa,SAAS,cAAT,CAAwB,YAAY,EAAE,aAAtC,CAAjB;AACA,SAAO,WAAP,CAAmB,UAAnB;AACA,SAAO,WAAP,CAAmB,MAAnB;AACA,cAAY,OAAZ,GAAsB,YAAW;AAC/B,MAAE,cAAF;AACA,gBAAY,SAAZ,GAAwB,YAAY,EAAE,aAAtC;AACA,QAAI,SAAS,SAAS,cAAT,CAAwB,QAAxB,CAAb;AACA,QAAI,SAAS,SAAS,aAAT,CAAuB,KAAvB,CAAb;AACA,WAAO,KAAP,GAAe,EAAE,aAAjB;AACA,WAAO,OAAP,GAAiB,YAAW;AAC1B,QAAE,MAAF,CAAS,KAAK,KAAd,EAAqB,YAArB,GAAqC,EAAE,MAAF,CAAS,KAAK,KAAd,EAAqB,YAAtB,GAAsC,KAAtC,GAA8C,IAAlF;AACD,KAFD;AAGA,QAAI,aAAa,SAAS,cAAT,CAAwB,YAAY,EAAE,aAAtC,CAAjB;AACA,WAAO,WAAP,CAAmB,UAAnB;AACA,WAAO,WAAP,CAAmB,MAAnB;AACD,GAZD;;;;;;AAkBD,CAnMD","file":"lockableLayers-compiled.js","sourcesContent":["/**\n * Created by Lyle Denman on 5/22/16.\n */\n(function(){\n  var canvas = document.getElementById('canvas');\n  var ctx = canvas.getContext('2d');\n\n  /************************/\n  /***** SQUARE CLASS *****/\n  /************************/\n  var Square = function(x, y, w, fillColor) {\n    this.x = x || 0; // Default to 0 if no x provided, etc\n    this.y = y || 0;\n    this.width = w || 1;\n    this.height = w || 1;\n    this.fillColor = fillColor || \"#FFFFFF\";\n  };\n\n  Square.prototype.draw = function(ctx) {\n    ctx.fillStyle = this.fillColor;\n    ctx.fillRect(this.x, this.y, this.width, this.height);\n  };\n\n\n  var Layer = function() {\n    this.clickX = [];\n    this.clickY = [];\n    this.clickDrag = [];\n    this.clickColor = [];\n    this.clickSize = [];\n    this.drawToCanvas = true;\n  };\n\n\n  /************************/\n  /***** CANVAS CLASS *****/\n  /************************/\n  var CanvasState = function(canvas) {\n    this.canvas = canvas; // get canvas\n    this.ctx = canvas.getContext('2d'); // get context for drawing\n    this.paint = false; // paint: draw to canvas when true\n    this.listenMouseDown();\n    this.listenMouseMove();\n    this.listenMouseUp();\n\n    this.colors = [{text: \"Black\", hex: \"#000000\"}, {text: \"Red\", hex: \"#FF0000\"},\n      {text: \"Green\", hex: \"#00FF00\"}, {text: \"Blue\", hex: \"#0000FF\"}];\n    this.curColorIndex = 0;\n    this.curColorName = this.colors[this.curColorIndex].text;\n\n    this.sizes = [{text: \"Tiny\", radius: 2}, {text: \"Small\", radius: 5},\n      {text: \"Medium\", radius: 10}, {text: \"Large\", radius: 15}];\n    this.curSizeIndex = 0;\n    this.curSizeName = this.sizes[this.curSizeIndex].text;\n\n    this.layers = []; // Store all layers\n    this.layers.push(new Layer());\n    this.curLayerIndex = 0;\n  };\n\n  CanvasState.prototype.addClick = function(x, y, dragging) {\n    this.layers[this.curLayerIndex].clickX.push(x);\n    this.layers[this.curLayerIndex].clickY.push(y);\n    this.layers[this.curLayerIndex].clickDrag.push(dragging);\n    this.layers[this.curLayerIndex].clickColor.push(this.colors[this.curColorIndex].hex);\n    this.layers[this.curLayerIndex].clickSize.push(this.sizes[this.curSizeIndex].radius);\n  };\n\n  CanvasState.prototype.redraw = function() {\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height); // Clear all\n    this.ctx.lineJoin = \"round\";\n\n    for(var i=0; i < this.layers[this.curLayerIndex].clickX.length; i++) {\n      this.ctx.beginPath();\n      if(this.layers[this.curLayerIndex].clickDrag[i] && i){\n        this.ctx.moveTo(this.layers[this.curLayerIndex].clickX[i-1], this.layers[this.curLayerIndex].clickY[i-1]);\n      }else{\n        this.ctx.moveTo(this.layers[this.curLayerIndex].clickX[i]-1, this.layers[this.curLayerIndex].clickY[i]);\n      }\n      this.ctx.lineTo(this.layers[this.curLayerIndex].clickX[i], this.layers[this.curLayerIndex].clickY[i]);\n      this.ctx.closePath();\n      this.ctx.strokeStyle = this.layers[this.curLayerIndex].clickColor[i];\n      this.ctx.lineWidth = this.layers[this.curLayerIndex].clickSize[i];\n      this.ctx.stroke();\n    }\n  };\n\n  CanvasState.prototype.drawAllLayers = function() {\n    var ctx = this.ctx;\n\n    for (var layerNum = 0; layerNum < this.layers.length; layerNum++) {\n      if (this.layers[layerNum].drawToCanvas) {\n        for(var i=0; i < this.layers[layerNum].clickX.length; i++) {\n          ctx.beginPath();\n          if(this.layers[layerNum].clickDrag[i] && i){\n            ctx.moveTo(this.layers[layerNum].clickX[i-1], this.layers[layerNum].clickY[i-1]);\n          }else{\n            ctx.moveTo(this.layers[layerNum].clickX[i]-1, this.layers[layerNum].clickY[i]);\n          }\n          ctx.lineTo(this.layers[layerNum].clickX[i], this.layers[layerNum].clickY[i]);\n          ctx.closePath();\n          ctx.strokeStyle = this.layers[layerNum].clickColor[i];\n          ctx.lineWidth = this.layers[layerNum].clickSize[i];\n          ctx.stroke();\n        }\n      }\n    }\n  };\n\n  CanvasState.prototype.changeLineWidth = function() {\n    this.curSizeIndex = (this.curSizeIndex + 1) % this.sizes.length;\n    this.curSizeName = this.sizes[this.curSizeIndex].text;\n  };\n\n  CanvasState.prototype.changeColor = function() {\n    this.curColorIndex = (this.curColorIndex + 1) % this.colors.length;\n    this.curColorName = this.colors[this.curColorIndex].text;\n  };\n\n  CanvasState.prototype.listenMouseMove = function() {\n    this.canvas.addEventListener('mousemove', (e) => {\n      if (this.paint) {\n        this.addClick(e.offsetX, e.offsetY, true); // Pass mouse coordinates\n        this.redraw();\n        this.drawAllLayers();\n      }\n    });\n  };\n\n  CanvasState.prototype.listenMouseUp = function() {\n    this.canvas.addEventListener('mouseup', (e) => {\n      this.paint = false;\n      this.drawAllLayers();\n    })\n  };\n\n  CanvasState.prototype.listenMouseDown = function() {\n    this.canvas.addEventListener('mousedown', (e) => {\n      this.paint = true;\n      this.addClick(e.offsetX, e.offsetY, false); // Pass mouse coordinates\n      // Passing 'false' for 'dragging' ensures there is not an undesired line\n      // drawn between the last point of mouseUp and the current mouseDown\n      this.redraw();\n      this.drawAllLayers();\n    });\n  };\n\n  CanvasState.prototype.createNewLayer = function() {\n    this.layers.push(new Layer());\n    this.curLayerIndex++;\n  };\n\n\n  var c = new CanvasState(canvas);\n\n  var sizeBtn = document.getElementById('size');\n  sizeBtn.innerHTML = \"Size: \" + c.curSizeName;\n  sizeBtn.onclick = function() {\n    c.changeLineWidth();\n    sizeBtn.innerHTML = \"Size: \" + c.curSizeName;\n  };\n\n  var colorBtn = document.getElementById('color');\n  colorBtn.innerHTML = \"Color: \" + c.curColorName;\n  colorBtn.onclick = function() {\n    c.changeColor();\n    colorBtn.innerHTML = \"Color: \" + c.curColorName;\n  };\n\n  var newLayerBtn = document.getElementById('new-layer');\n  newLayerBtn.innerHTML = \"Layer: \" + c.curLayerIndex;\n  var layers = document.getElementById('layers');\n  var newDiv = document.createElement('DIV');\n  newDiv.index = c.curLayerIndex;\n  newDiv.onclick = function() {\n    c.layers[this.index].drawToCanvas = (c.layers[this.index].drawToCanvas) ? false : true;\n  };\n  var newDivText = document.createTextNode(\"Layer: \" + c.curLayerIndex);\n  newDiv.appendChild(newDivText);\n  layers.appendChild(newDiv);\n  newLayerBtn.onclick = function() {\n    c.createNewLayer();\n    newLayerBtn.innerHTML = \"Layer: \" + c.curLayerIndex;\n    var layers = document.getElementById('layers');\n    var newDiv = document.createElement('DIV');\n    newDiv.index = c.curLayerIndex;\n    newDiv.onclick = function() {\n      c.layers[this.index].drawToCanvas = (c.layers[this.index].drawToCanvas) ? false : true;\n    };\n    var newDivText = document.createTextNode(\"Layer: \" + c.curLayerIndex);\n    newDiv.appendChild(newDivText);\n    layers.appendChild(newDiv);\n  };\n\n  // Create a \"Layer\" class\n  // One instance of Layer will hold all activity drawn to that layer.\n  // Layers can be selected at random -- changes will only affect selected layer\n  // Layers can be re-ordered\n})();\n"]}